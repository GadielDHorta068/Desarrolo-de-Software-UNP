<!-- Card: encabezado con título y tabs -->
<div class="bg-white dark:bg-gray-800 p-4 rounded-2xl shadow flex flex-col gap-4 m-1">
  <!-- Título -->
  <h1 class="text-3xl font-bold text-gray-900 dark:text-white">{{ event?.title }}</h1>
  <hr class="border-gray-300 dark:border-gray-700" />

  <!-- Tabs y botón -->
  <div class="flex justify-between items-center border-gray-300 dark:border-gray-700 pb-1">
    <div class="flex space-x-6">

      <!-- Tab: Información -->
      <span class="pb-2 cursor-pointer font-semibold" [ngClass]="{
            'text-blue-600 border-b-2 border-blue-600': isInfoTab(),
            'text-gray-600 dark:text-gray-300': !isInfoTab()
          }" (click)="tab = TAB_INFO">Información</span>


      <!-- Tab: Registrados -->
      <span *ngIf="isUserCreator" class="pb-2 cursor-pointer font-semibold" [ngClass]="{
            'text-blue-600 border-b-2 border-blue-600': isRegisteredTab(),
            'text-gray-600 dark:text-gray-300': !isRegisteredTab()
          }" (click)="setTab(TAB_REGISTERED)">Registrados</span>

    </div>

    
  </div>

  <!-- TAB: Información -->
  <div *ngIf="isInfoTab()" class="flex flex-col gap-4">
    <div class="rounded-[6px] p-[10px] border-2 border-[darkslategray]">
      <div class="flex justify-between items-center">
        <h3 class="text-[1.2rem] text-[mediumseagreen] pb-2">Información del evento</h3>
        <button *ngIf="canUserInscript"
          class="bg-orange-600 dark:bg-orange-500 hover:bg-orange-700 dark:hover:bg-orange-600 text-white px-2 py-1 rounded-lg text-sm font-medium transition-colors"
          (click)="onInscript()">Inscribirme</button>
        <div *ngIf="canEdit && (event?.statusEvent == 'OPEN')" class="flex gap-1">
          <button
            class="bg-emerald-600 dark:bg-emerald-500 hover:bg-emerald-700 dark:hover:bg-emerald-600 text-white px-2 py-1 rounded-lg text-sm font-medium transition-colors"
            routerLink="/event/management/edit/{{event?.id}}">Ir a edición</button>
          <button class="bg-green-500 text-white py-[1px] px-2 rounded" title="Compartir"
            (click)="modalShareEvent.open()">
            <img class="w-6 h-6 filter invert" src="assets/link.png" alt="">
          </button>
        </div>
      </div>
      <app-info-event [event]="event" [winners]="winnersAudit"></app-info-event>
    </div>
  </div>

  <!-- TAB: Registrados -->
  <div *ngIf="isRegisteredTab()" class="p-4">
    <div *ngIf="participants.length > 0; else noParticipants">
      <table class="min-w-full border border-gray-300 dark:border-gray-700 rounded-lg shadow">
        <thead>
          <tr class="bg-gray-100 dark:bg-gray-700">
            <th class="p-2 text-left">Nombre</th>
            <th class="p-2 text-left">Apellido</th>
            <th class="p-2 text-left">Email</th>
            <th class="p-2 text-left">Podio</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let p of participants" class="border-t border-gray-300 dark:border-gray-700">
            <td class="p-2">{{ p.name }}</td>
            <td class="p-2">{{ p.surname }}</td>
            <td class="p-2">{{ p.email }}</td>
            <td class="p-2">
              <div *ngIf="getPlaceGoal(p) as dataGoal" class="flex items-center gap-[5px]">
                <app-tag-prize [position]="dataGoal.position"></app-tag-prize>
                <span class="font-bold"><a [routerLink]="['/chat', dataGoal.idUser]">Ir al chat</a></span>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <ng-template #noParticipants>
      <p class="text-gray-700 dark:text-gray-300 text-center italic">
        No hay usuarios registrados todavía.
      </p>
    </ng-template>
  </div>

</div>

<app-modal-info [dataModal]="dataModal" #modalInfo></app-modal-info>
<app-modal-share-event #modalShareEvent></app-modal-share-event>

<!-- MODAL INSCRIPCION -->
<!-- conectado al boton "addToCart" -->
<app-questionary
    *ngIf="showModalIncript"
    [loggedUser] = "userLogged"
    (close)="onInscriptClosed()"
    (onInscript) = "onQuestionarySubmit($event)"
>
</app-questionary>

<app-raffle-numbers
    *ngIf = "showRaffleModal"
    (closeRaffleNumberModal) = "onRaffleClosed()"
    (proceedToInscript)="onProceedToQuestionary($event)"
>
</app-raffle-numbers>



