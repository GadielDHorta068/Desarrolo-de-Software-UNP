<!-- Overlay -->
<div class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50">
  <!-- Caja del modal -->
    <div class="relative bg-white dark:bg-gray-800 rounded-2xl shadow-lg w-full max-w-md p-6">
        <button (click)="closeModal()"
           class="absolute top-3 right-3 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300">
        ✕</button>
        <h2 class="text-xl font-semibold mb-4 text-gray-900 dark:text-white">Formulario de reporte</h2>
        <!-- Formulario reactivo -->
        <form [formGroup]="form" (ngSubmit)="onReport()" class="space-y-4" novalidate>
            <div>
                <label class="block text-sm font-medium text-gray-700 dark:text-gray-200">Evento</label>
                <input
                    type="text"
                    formControlName="titleEvent"
                    class="w-full border rounded-lg px-3 py-2 focus:ring focus:ring-red-300 focus:outline-none bg-white text-gray-900 dark:bg-gray-800 dark:text-gray-100"
                />
            </div>  
            <div>
                <label class="block text-sm font-medium text-gray-700 dark:text-gray-200">Email</label>
                <input
                    type="email"
                    formControlName="email"
                    class="w-full border rounded-lg px-3 py-2 focus:ring focus:ring-red-300 focus:outline-none bg-white text-gray-900 dark:bg-gray-800 dark:text-gray-100"
                />
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700 dark:text-gray-200">Reporte/observaciones <small>(10–500 caracteres)</small></label>
                <textarea formControlName="description" rows="4" maxlength="500"
                    class="w-full border rounded-lg px-3 py-2 focus:ring focus:ring-red-300 focus:outline-none bg-white text-gray-900 dark:bg-gray-800 dark:text-gray-100 resize-y"
                ></textarea>
                <div class="mt-1 text-xs" [class.text-red-500]="form.get('description')?.invalid && form.get('description')?.touched" [class.text-gray-400]="!(form.get('description')?.invalid && form.get('description')?.touched)">
                    <span *ngIf="form.get('description')?.invalid && form.get('description')?.touched">
                        <span *ngIf="form.get('description')?.errors?.['required']">Este campo es obligatorio.</span>
                        <span *ngIf="form.get('description')?.errors?.['minlength']">El motivo debe tener al menos 10 caracteres.</span>
                        <span *ngIf="form.get('description')?.errors?.['maxlength']">El motivo no puede superar los 500 caracteres.</span>
                    </span>
                    <span *ngIf="!(form.get('description')?.invalid && form.get('description')?.touched)">Escribe un motivo claro y detallado.</span>
                </div>
            </div>

            
            <div class="flex justify-end space-x-2">
                <button type="button" class="px-4 py-2 bg-red-600 hover:bg-red-700 text-white font-medium rounded-lg" (click)="closeModal()">
                Cancelar</button>

                <button type="submit" [disabled]="form.invalid"
                class="px-4 py-2 bg-green-600 hover:bg-green-700 text-white font-medium rounded-lg disabled:opacity-50 disabled:cursor-not-allowed"
                >Reportar</button>
            </div>
        </form>
    </div>
</div>
